# OD&IS - Prototype d'Aide √† la Localisation (Recherche Invers√©e)

[![Python Version](https://img.shields.io/badge/python-3.10-blue.svg)](https://www.python.org/downloads/release/python-3100/)
[![Framework](https://img.shields.io/badge/Framework-Streamlit-red.svg)](https://streamlit.io)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](../../LICENSE)

## üéØ Contexte et Objectifs du Projet

Ce projet, surnomm√© **"Stream 2"**, est un prototype fonctionnel explorant une approche de **"recherche invers√©e"** pour l'aide √† la relocalisation des personnes et familles accompagn√©es par des structures d'insertion comme [J'accueille](https://www.jaccueille.fr/) ou [SINGA](https://www.singafrance.com/).

Il s'inscrit en compl√©ment du projet principal [13_odis](https://github.com/dataforgoodfr/13_odis) (ou "Stream 1"), qui se concentre sur l'exploration et la comparaison d'indicateurs pour une commune d√©j√† s√©lectionn√©e.

L'innovation de ce prototype est de renverser la logique : au lieu de partir d'un lieu, **on part des besoins et du projet de vie de la personne**. Le persona principal est le travailleur social qui, √† travers cet outil, peut identifier les territoires les plus prometteurs pour la r√©ussite d'un projet d'int√©gration.

![Comparaison Stream 1 vs Stream 2](Screenshot-3.png)

Ce prototype a un triple objectif :
1.  **Valider la pertinence de l'approche** aupr√®s des futurs utilisateurs (travailleurs sociaux, accompagnants).
2.  **D√©montrer la faisabilit√© technique** de construire un score de pertinence en utilisant exclusivement des donn√©es ouvertes (Open Data).
3.  **Promouvoir l'int√©r√™t de cette d√©marche** aupr√®s de potentiels partenaires, d√©cideurs et financeurs.

## ‚ú® Fonctionnalit√©s Principales

*   **Profil Personnalis√© :** D√©finissez un "projet de vie" d√©taill√© incluant la composition du foyer, le niveau scolaire des enfants, les m√©tiers vis√©s, les besoins en formation, etc.
*   **Pond√©ration des Crit√®res :** Ajustez l'importance de chaque grande cat√©gorie (emploi, logement, √©ducation, inclusion) pour l'adapter aux priorit√©s de chaque projet.
*   **Scoring Intelligent :** Chaque commune de France est √©valu√©e sur sa compatibilit√© avec le profil, en s'appuyant sur une multitude de sources de donn√©es ouvertes.
*   **Syst√®me de "Bin√¥mes" :** L'algorithme associe de mani√®re unique des communes voisines (`bin√¥mes`) pour proposer des solutions conjointes qui r√©pondent √† l'ensemble des besoins, m√™me si une seule commune ne le pourrait pas.
*   **Carte Interactive :** Visualisez les localit√©s les mieux not√©es, leur score, et superposez des couches d'informations additionnelles (√©coles, √©tablissements de sant√©, services d'inclusion).
*   **R√©sultats D√©taill√©s :** Explorez les 5 meilleurs r√©sultats avec une analyse de leurs points forts, un "radar" visuel des scores par cat√©gorie, et des liens pour approfondir.
*   **Sc√©narios de D√©monstration :** Chargez rapidement des profils pr√©-configur√©s pour d√©couvrir le potentiel de l'outil.

## üì∏ Aper√ßu de l'Application

| Page des r√©sultats | Vue d√©taill√©e d'un r√©sultat |
| :---: | :---: |
| ![Screenshot Page r√©sultats](Screenshot-1.png) | ![Screenshot d√©tail d'un r√©sultat](Screenshot-2.png) |

## üöÄ Installation et Lancement

### Pr√©requis

*   [Python 3.10+](https://www.python.org/)
*   [Poetry](https://python-poetry.org/docs/#installation) pour la gestion des d√©pendances.

### Instructions

1.  **Clonez le d√©p√¥t :**
    ```bash
    git clone https://github.com/dataforgoodfr/13_odis.git
    cd 13_odis
    ```

2.  **Installez les d√©pendances :**
    Ce projet utilise Poetry. Depuis la racine du projet, ex√©cutez :
    ```bash
    poetry install
    ```

3.  **Lancez l'application Streamlit :**
    Le fichier principal de l'application se trouve dans `eda/streamlit/`.
    ```bash
    poetry run streamlit run eda/streamlit/main.py
    ```
    L'application devrait s'ouvrir dans votre navigateur web.

## ‚öôÔ∏è Fonctionnement : Le Moteur de Scoring

Le c≈ìur de l'application est un pipeline de scoring qui √©value les communes en fonction du profil utilisateur.

1.  **Filtrage :** Le moteur d√©limite d'abord la zone de recherche en fonction de la distance souhait√©e par rapport au lieu de vie actuel et d'un filtre de population minimale.
2.  **Calcul des Crit√®res :** Il calcule ensuite des dizaines de scores individuels pour chaque commune (ex: ad√©quation des offres d'emploi, disponibilit√© de logements sociaux, capacit√© des √©coles). Ces scores sont normalis√©s pour permettre une comparaison √©quitable.
3.  **Logique de Bin√¥me :** Le moteur identifie les communes voisines et les √©value par paires (`bin√¥me`). Cela permet de recommander deux villes qui, ensemble, remplissent tous les crit√®res (ex: l'une a les emplois, l'autre les logements). Une petite p√©nalit√© (`binome_penalty`) est appliqu√©e pour privil√©gier les solutions au sein d'une m√™me commune (`mon√¥me`) lorsque c'est possible.
4.  **Agr√©gation par Cat√©gorie :** Les scores des crit√®res individuels sont ensuite moyenn√©s pour former des scores de cat√©gories (Emploi, Logement, √âducation, etc.).
5.  **Score Pond√©r√© Final :** Enfin, un `weighted_score` global est calcul√© pour chaque commune ou bin√¥me en appliquant les poids d√©finis par l'utilisateur. Les r√©sultats sont ensuite class√©s selon ce score final.

![Explication de la logique de scoring](Screenshot-4.png)

## üõ†Ô∏è Stack Technique

*   **Framework Applicatif :** [Streamlit](https://streamlit.io/)
*   **Analyse de Donn√©es :** [Pandas](https://pandas.pydata.org/), [GeoPandas](https://geopandas.org/), [NumPy](https://numpy.org/)
*   **Scoring & Normalisation :** [Scikit-learn](https://scikit-learn.org/)
*   **Cartographie Interactive :** [Folium](https://python-visualization.github.io/folium/) & [streamlit-folium](https://github.com/randyzwitch/streamlit-folium)
*   **Graphiques :** [Plotly Express](https://plotly.com/python/plotly-express/)
*   **Sources de Donn√©es :** Les donn√©es sont agr√©g√©es depuis de nombreuses sources ouvertes, notamment l'INSEE, Data.gouv.fr, France Travail (P√¥le Emploi), etc. Le jeu de donn√©es principal est `odis_june_2025_jacques.parquet`.

## üìÇ Structure du Projet

L'application Streamlit est contenue dans le r√©pertoire `eda/streamlit/` :

```
eda/streamlit/
‚îú‚îÄ‚îÄ README.md          # Ce fichier
‚îú‚îÄ‚îÄ main.py            # Point d'entr√©e, gestion de l'√©tat et mise en page
‚îú‚îÄ‚îÄ ui.py              # Composants de l'interface utilisateur (sidebar, onglets, etc.)
‚îú‚îÄ‚îÄ scoring.py         # Pipeline de scoring et de traitement des donn√©es
‚îú‚îÄ‚îÄ maps.py            # Fonctions pour la cr√©ation des cartes Folium
‚îú‚îÄ‚îÄ config.py          # Chemins de fichiers, valeurs par d√©faut et sc√©narios de d√©mo
‚îî‚îÄ‚îÄ *.png              # Captures d'√©cran pour la documentation
```

## üîÆ Feuille de Route et Am√©liorations Futures

Ce prototype est une base solide qui peut √™tre grandement am√©lior√©e :

*   **‚≠ê Fonctionnalit√©s :**
    *   **Comptes Utilisateurs :** Permettre de sauvegarder, nommer et g√©rer plusieurs sc√©narios de "projets de vie".
    *   **Export PDF :** Impl√©menter un export propre et imprimable de la synth√®se des r√©sultats.
    *   **Filtres Avanc√©s :** Ajouter des filtres plus fins (ex: exclure certaines r√©gions, filtrer par couleur politique).
    *   **Comparaison des R√©sultats :** Ajouter une fonction pour comparer 2 ou 3 des meilleurs r√©sultats c√¥te √† c√¥te.

*   **üìä Donn√©es & Scoring :**
    *   **√âtendre les Sources de Donn√©es :** Int√©grer plus de jeux de donn√©es (transports en commun, services de sant√© sp√©cifiques, activit√©s culturelles).
    *   **Fra√Æcheur des Donn√©es :** Mettre en place un pipeline pour mettre √† jour automatiquement les donn√©es sous-jacentes.
    *   **Affiner les Crit√®res :** Travailler avec des travailleurs sociaux pour affiner la liste des crit√®res et leur pertinence.

*   **üíª Technique & UX :**
    *   **Refactoring du Scoring :** La logique de scoring, actuellement dans un fichier Python export√© d'un notebook, m√©riterait d'√™tre r√©√©crite dans une biblioth√®que plus modulaire et testable.
    *   **Tests :** Ajouter des tests unitaires et d'int√©gration pour fiabiliser le pipeline de scoring et l'interface.
    *   **Performance :** Optimiser le chargement des donn√©es et les calculs de score pour une meilleure fluidit√©.
    *   **Design UI/UX :** Am√©liorer le design visuel, la mise en page et l'ergonomie sur mobile.

## ‚öñÔ∏è Licence

Ce projet est sous licence MIT. Consultez le fichier [LICENSE](../../LICENSE) √† la racine du projet pour plus de d√©tails.
